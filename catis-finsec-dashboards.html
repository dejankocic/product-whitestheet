<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CATIS / FinSec Dashboards — Static HTML</title>
  <!-- Tailwind (for quick local edits). You can replace CDN with your local build if needed. -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js for charts (no build step needed) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --catis-navy: #0b1220;
      --catis-card: #111827;
      --catis-border: #334155;
      --catis-text: #e5e7eb;
      --catis-subtle: #94a3b8;
      --c-cyan: #22d3ee;
      --c-indigo: #818cf8;
      --c-amber: #f59e0b;
      --c-red: #ef4444;
      --c-green: #10b981;
      --c-violet: #8b5cf6;
    }
    body.dark {
      background: radial-gradient(1000px 600px at 20% -10%, #0f172a 0%, #020617 100%);
      color: var(--catis-text);
    }
    body.light {
      background: radial-gradient(1000px 600px at 20% -10%, #f8fafc 0%, #e2e8f0 100%);
      color: #0f172a;
    }
    body.light h1, body.light h2, body.light h3, body.light h4, body.light h5, body.light h6, body.light p, body.light span, body.light li, body.light th, body.light td, body.light label, body.light div, body.light a, body.light button {
      color: #0f172a !important;
    }
    .card { background: color-mix(in srgb, var(--catis-card) 90%, transparent); border:1px solid var(--catis-border); }
    body.light .card { background: #fff; border:1px solid #cbd5e1; }
    .pill { border:1px solid var(--catis-border); }
    .pill.active { background: rgba(148,163,184,0.12); }
    @media print {
      body { background: #ffffff !important; }
      .no-print { display:none !important; }
      .card { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    }
    body.light .inline-flex.no-print button {
      background: #f1f5f9;
      color: #0f172a;
      border-color: #cbd5e1;
    }
    body.light .inline-flex.no-print button.bg-slate-800 {
      background: #e0e7ef !important;
      color: #0f172a !important;
    }
    body.light .inline-flex.no-print button.bg-slate-900\/60 {
      background: #f1f5f9 !important;
      color: #64748b !important;
    }
  </style>
</head>
<body class="dark text-slate-100 min-h-screen p-6">
  <div class="max-w-6xl mx-auto space-y-8">
    <header class="flex items-center justify-between">
      <h1 class="text-2xl font-bold text-cyan-400 flex items-center gap-2">
        <svg class="w-7 h-7 text-cyan-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 2l2 7h7l-5.5 4 2 7-5.5-4-5.5 4 2-7L3 9h7z"/></svg>
        CATIS / FinSec Intelligence Dashboard
      </h1>
      <div class="flex gap-2 items-center">
        <span class="inline-flex items-center gap-2 px-3 py-1.5 rounded-lg text-white text-sm font-semibold bg-gradient-to-r from-cyan-500 to-violet-500 shadow no-print">
          <svg class="w-4 h-4 text-white opacity-80" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
          Live data
        </span>
        <button id="mode-toggle" class="px-3 py-1.5 rounded-lg border border-slate-600 text-sm no-print" aria-label="Toggle dark/light mode">🌙</button>
      </div>
    </header>

    <!-- Tabs -->
    <div>
      <div class="flex flex-wrap gap-4 items-center">
        <div class="inline-flex rounded-xl overflow-hidden border border-slate-700 no-print">
          <button id="tab-overview" class="px-4 py-2 bg-slate-800 text-slate-100">Overview</button>
          <button id="tab-attack" class="px-4 py-2 bg-slate-900/60 text-slate-300">Attack Types</button>
          <button id="tab-trends" class="px-4 py-2 bg-slate-900/60 text-slate-300">Trends</button>
        </div>
        <div class="no-print">
          <label for="period-select" class="mr-2 text-sm text-slate-400">Period:</label>
          <select id="period-select" class="px-3 py-1.5 rounded-lg border border-slate-600 text-sm bg-slate-800 text-slate-100 focus:outline-none">
            <option value="24h" selected>Last 24 Hours</option>
            <option value="7d">Last 7 Days</option>
            <option value="30d">Last 30 Days</option>
            <option value="custom">Custom...</option>
          </select>
        </div>
      </div>

      <!-- OVERVIEW TAB -->
      <section id="panel-overview" class="mt-6 space-y-6">
        <!-- KPIs -->
         <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div class="card rounded-2xl p-6">
            <h3 class="text-lg text-slate-300 flex items-center gap-2">
              <svg class="w-5 h-5 text-cyan-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M9 12l2 2l4-4m5 2a9 9 0 11-18 0a9 9 0 0118 0z"/></svg>
              Prevention rate (total attacks blocked)</h3>
            <p class="text-3xl font-bold text-cyan-300">85.7%</p>
            <div class="mt-4">
              <h4 class="text-base font-semibold text-slate-200 mb-2">Value Metrics</h4>
              <div class="grid grid-cols-2 gap-4 mb-2">
                <div>
                  <div class="text-xs text-slate-400">Cost Avoided</div>
                  <div class="text-xl font-bold text-green-400">$2.3M</div>
                </div>
                <div>
                  <div class="text-xs text-slate-400">Automation Rate</div>
                  <div class="text-xl font-bold text-cyan-300">73%</div>
                </div>
              </div>
              <div class="text-xs text-slate-400 mt-1">Estimates based on prevented incidents &amp; auto-resolutions.</div>
            </div>
          </div>
          <div class="card rounded-2xl p-6">
            <h3 class="text-lg text-slate-300 flex items-end gap-2">
              <svg class="w-5 h-5 text-cyan-400 self-end" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
                <path stroke="currentColor" stroke-width="2" d="M12 2v2m0 16v2m10-10h-2M4 12H2m15.07-7.07l-1.42 1.42M6.34 17.66l-1.42 1.42m12.02 0l-1.42-1.42M6.34 6.34L4.92 4.92"/>
              </svg>
              Active traps
              <span class="text-3xl font-bold text-cyan-300 ml-2">4</span>
            </h3>
            <!-- Active services list with status -->
            <div class="mt-4">
              <h4 class="text-sm font-semibold mb-2 text-slate-300 flex items-center gap-2">
                <svg class="w-4 h-4 text-cyan-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M16 17l-4 4m0 0l-4-4m4 4V3"/></svg>
                Clones status
              </h4>
              <div class="grid grid-cols-2 gap-x-4 gap-y-1 text-xs">
                <div class="flex items-center py-0.5">
                  <span class="inline-block w-3 h-3 rounded-full mr-2" style="background:#22d3ee"></span>
                  <span class="flex-1 font-semibold" style="color:#22d3ee">Payment API</span>
                  <span class="ml-2 px-2 py-0.5 w-[104px] text-center rounded text-xs font-semibold bg-green-700 text-green-100">Up &amp; Running</span>
                </div>
                <div class="flex items-center py-0.5">
                  <span class="inline-block w-3 h-3 rounded-full mr-2" style="background:#818cf8"></span>
                  <span class="flex-1 font-semibold" style="color:#818cf8">Web Application</span>
                  <span class="ml-2 px-2 py-0.5 w-[104px] text-center rounded text-xs font-semibold bg-green-700 text-green-100">Up &amp; Running</span>
                </div>
                <div class="flex items-center py-0.5">
                  <span class="inline-block w-3 h-3 rounded-full mr-2" style="background:#f59e0b"></span>
                  <span class="flex-1 font-semibold" style="color:#f59e0b">VPN Gateway</span>
                  <span class="ml-2 px-2 py-0.5 w-[104px] text-center rounded text-xs font-semibold bg-green-700 text-green-100">Up &amp; Running</span>
                </div>
                <div class="flex items-center py-0.5">
                  <span class="inline-block w-3 h-3 rounded-full mr-2" style="background:#ef4444"></span>
                  <span class="flex-1 font-semibold" style="color:#ef4444">Payment Gateway</span>
                  <span class="ml-2 px-2 py-0.5 w-[104px] text-center rounded text-xs font-semibold bg-rose-700 text-rose-100 relative group cursor-pointer">
                    Stopped
                    <span class="absolute left-1/2 -translate-x-1/2 bottom-full mb-2 hidden group-hover:block bg-slate-800 text-rose-200 text-xs rounded px-2 py-1 whitespace-nowrap shadow-lg z-10">
                      Maintenance window
                    </span>
                  </span>
                </div>
                <div class="flex items-center py-0.5">
                  <span class="inline-block w-3 h-3 rounded-full mr-2" style="background:#10b981"></span>
                  <span class="flex-1 font-semibold" style="color:#10b981">Mobile API</span>
                  <span class="ml-2 px-2 py-0.5 w-[104px] text-center rounded text-xs font-semibold bg-green-700 text-green-100">Up &amp; Running</span>
                </div>
              </div>
            </div>
          </div>
         </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="card rounded-2xl p-6">
            <h3 class="text-lg text-slate-300 flex items-center gap-2">
              <svg class="w-5 h-5 text-rose-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/></svg>
              Total Attacks Observed
            </h3>
            <div class="grid grid-cols-2 gap-2 items-center mt-3">
              <div>
                <p class="text-3xl font-bold text-cyan-300">321,132</p>
              </div>
              <div class="space-y-2 text-sm text-slate-300">
                <div class="flex items-center"><span class="w-2 h-2 rounded-full bg-slate-400 mr-2"></span>Low Level<div class="ml-auto font-semibold">301,580</div></div>
                <div class="flex items-center"><span class="w-2 h-2 rounded-full bg-cyan-400 mr-2"></span>Medium Level<div class="ml-auto font-semibold">19,453</div></div>
                <div class="flex items-center"><span class="w-2 h-2 rounded-full bg-rose-500 mr-2"></span>High Level<div class="ml-auto font-semibold">99</div></div>
              </div>
            </div>
          </div>
          <div class="card rounded-2xl p-6">
            <h3 class="text-lg text-slate-300 flex items-center gap-2">
              <svg class="w-5 h-5 text-violet-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 20v-6m0 0V4m0 10l-4-4m4 4l4-4"/></svg>
              Attacks origin
            </h3>
            <div class="text-xs text-slate-400 mb-1">Unique attackers</div>
            <div class="grid grid-cols-2 gap-2 items-center mt-3">
              <div>
                <p class="text-3xl font-bold text-violet-400">5,462</p>
                <!-- period context removed, handled by period selector -->
              </div>
              <div class="space-y-2 text-sm text-slate-300">
                <div class="flex items-center"><span class="inline-block w-2 h-2 rounded-full mr-2 bg-slate-400"></span><img src="https://flagcdn.com/24x18/cn.png" alt="China" class="inline-block mr-2 rounded" width="24" height="18"><span class="grow">China</span><span class="font-semibold">1519</span></div>
                <div class="flex items-center"><span class="inline-block w-2 h-2 rounded-full mr-2 bg-slate-400"></span><img src="https://flagcdn.com/24x18/us.png" alt="USA" class="inline-block mr-2 rounded" width="24" height="18"><span class="grow">United States</span><span class="font-semibold">1491</span></div>
                <div class="flex items-center"><span class="inline-block w-2 h-2 rounded-full mr-2 bg-slate-400"></span><img src="https://flagcdn.com/24x18/rs.png" alt="Serbia" class="inline-block mr-2 rounded" width="24" height="18"><span class="grow">Serbia</span><span class="font-semibold">1233</span></div>
                <div class="flex items-center"><span class="inline-block w-2 h-2 rounded-full mr-2 bg-slate-400"></span><img src="https://flagcdn.com/24x18/de.png" alt="DE" class="inline-block mr-2 rounded" width="24" height="18"><span class="grow">Germany</span><span class="font-semibold">840</span></div>
                <div class="flex items-center"><span class="inline-block w-2 h-2 rounded-full mr-2 bg-slate-400"></span><img src="https://flagcdn.com/24x18/cz.png" alt="Czech Republic" class="inline-block mr-2 rounded" width="24" height="18"><span class="grow">Czech Republic</span><span class="font-semibold">654</span></div>
                <div class="flex items-center"><span class="inline-block w-2 h-2 rounded-full mr-2 bg-slate-400"></span><img src="https://flagcdn.com/24x18/za.png" alt="South Africa" class="inline-block mr-2 rounded" width="24" height="18"><span class="grow">South Africa</span><span class="font-semibold">580</span></div>
              </div>
            </div>
          </div>
          <div class="card rounded-2xl p-6">
            <h3 class="text-lg text-slate-300 flex items-center gap-2">
              <svg class="w-5 h-5 text-amber-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/></svg>
              Risk &amp; compliance
            </h3>
            <div class="mt-4">
              <div class="mb-2">
                <div class="flex items-center gap-3">
                  <span class="text-3xl font-bold text-orange-400">65</span>
                  <span class="text-base text-slate-400">/ 100</span>
                </div>
                <div class="w-full h-3 rounded-full bg-slate-700 mt-2 mb-1 relative overflow-hidden">
                  <div class="absolute left-0 top-0 h-3 rounded-full" style="width:65%; background:linear-gradient(90deg,#22d3ee 0%,#f59e0b 100%)"></div>
                </div>
                <div class="text-sm font-semibold text-amber-400">Medium risk</div>
              </div>
              <div class="flex flex-col gap-2 mt-4">
                <span class="inline-flex items-center px-3 py-1 rounded-full bg-green-500/20 text-green-500 font-semibold text-sm w-fit">ISO 27001: Pass</span>
                <span class="inline-flex items-center px-3 py-1 rounded-full bg-green-500/20 text-green-500 font-semibold text-sm w-fit">NIST 800-53: Pass</span>
                <span class="inline-flex items-center px-3 py-1 rounded-full bg-slate-500/20 text-slate-300 font-semibold text-sm w-fit">GDPR: Pending</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Charts -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div class="card rounded-2xl p-6">
            <h3 class="text-lg mb-3 text-slate-300 flex items-center gap-2">
              <svg class="w-5 h-5 text-cyan-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M3 12h18M3 6h18M3 18h18"/></svg>
              Threat trends by service (%)
            </h3>
            <div id="clone-pills" class="flex flex-nowrap gap-0.5 mb-4">
              <!-- pills rendered by JS -->
            </div>
            <div style="height:270px">
              <canvas id="cloneChart" height="270"></canvas>
            </div>
          </div>

          <div class="card rounded-2xl p-6">
            <h3 class="text-lg mb-3 text-slate-300 flex items-center gap-2">
              <svg class="w-5 h-5 text-violet-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 20v-6m0 0V4m0 10l-4-4m4 4l4-4"/></svg>
              Attack sources
            </h3>
            <div style="height:270px">
              <canvas id="barChart" height="270"></canvas>
            </div>
          </div>
        </div>

        <!-- Compliance -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 pt-2">
          <!-- Standard boxes removed as requested -->
        </div>
      </section>

      <!-- ATTACK TYPES TAB -->
      <section id="panel-attack" class="mt-6 space-y-6 hidden">
        <header class="flex items-center justify-between">
          <h2 class="text-2xl font-bold text-cyan-400 flex items-center gap-2">
            <svg class="w-7 h-7 text-violet-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M3 12h18M3 6h18M3 18h18"/></svg>
            Attack Types
          </h2>
          <!-- period context removed, handled by period selector -->
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <!-- Low Priority -->
          <div class="card rounded-2xl p-6 space-y-4">
            <div class="flex items-center gap-2">
              <span class="w-3 h-3 rounded-full" style="background:#94a3b8"></span>
              <h3 class="text-xl text-slate-100 font-semibold flex items-center gap-2">
                <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/></svg>
                Low Priority
              </h3>
            </div>
            <div class="text-5xl font-extrabold tracking-tight" style="color:#94a3b8">301,761</div>
            <div class="space-y-2">
              <div>
                <div class="flex justify-between text-xs text-slate-300"><span>Benign / Recon</span><span>60%</span></div>
                <div class="h-3 w-full bg-slate-700 rounded-md overflow-hidden"><div class="h-full" style="width:60%; background:#94a3b8"></div></div>
              </div>
              <div>
                <div class="flex justify-between text-xs text-slate-300"><span>Automated</span><span>39.8%</span></div>
                <div class="h-3 w-full bg-slate-700 rounded-md overflow-hidden"><div class="h-full" style="width:39.8%; background:#94a3b8"></div></div>
              </div>
              <div>
                <div class="flex justify-between text-xs text-slate-300"><span>Other</span><span>0.2%</span></div>
                <div class="h-3 w-full bg-slate-700 rounded-md overflow-hidden"><div class="h-full" style="width:0.2%; background:#94a3b8"></div></div>
              </div>
            </div>
            <div class="pt-2 space-y-2">
              <div class="flex items-center gap-2 text-sm text-slate-200"><span class="px-2 py-1 rounded-md bg-slate-700/80 font-mono text-slate-100">181,019</span><span class="opacity-90">Baithive Request Attempt</span></div>
              <div class="flex items-center gap-2 text-sm text-slate-200"><span class="px-2 py-1 rounded-md bg-slate-700/80 font-mono text-slate-100">120,189</span><span class="opacity-90">Trap Event</span></div>
              <div class="flex items-center gap-2 text-sm text-slate-200"><span class="px-2 py-1 rounded-md bg-slate-700/80 font-mono text-slate-100">553</span><span class="opacity-90">Unknown IP to integrated TI</span></div>
            </div>
          </div>

          <!-- Medium Priority -->
          <div class="card rounded-2xl p-6 space-y-4">
            <div class="flex items-center gap-2">
              <span class="w-3 h-3 rounded-full" style="background:#f59e0b"></span>
              <h3 class="text-xl text-slate-100 font-semibold flex items-center gap-2">
                <svg class="w-5 h-5 text-amber-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/></svg>
                Medium Priority
              </h3>
            </div>
            <div class="text-5xl font-extrabold tracking-tight" style="color:#f59e0b">19,465</div>
            <div class="space-y-2">
              <div>
                <div class="flex justify-between text-xs text-slate-300"><span>Botnet / Scripted</span><span>79.7%</span></div>
                <div class="h-3 w-full bg-slate-700 rounded-md overflow-hidden"><div class="h-full" style="width:79.7%; background:#f59e0b"></div></div>
              </div>
              <div>
                <div class="flex justify-between text-xs text-slate-300"><span>Exploit</span><span>11.3%</span></div>
                <div class="h-3 w-full bg-slate-700 rounded-md overflow-hidden"><div class="h-full" style="width:11.3%; background:#f59e0b"></div></div>
              </div>
              <div>
                <div class="flex justify-between text-xs text-slate-300"><span>Other</span><span>9.0%</span></div>
                <div class="h-3 w-full bg-slate-700 rounded-md overflow-hidden"><div class="h-full" style="width:9%; background:#f59e0b"></div></div>
              </div>
            </div>
            <div class="pt-2 space-y-2">
              <div class="flex items-center gap-2 text-sm text-slate-200"><span class="px-2 py-1 rounded-md bg-slate-700/80 font-mono text-slate-100">15,522</span><span class="opacity-90">Payload never seen before</span></div>
              <div class="flex items-center gap-2 text-sm text-slate-200"><span class="px-2 py-1 rounded-md bg-slate-700/80 font-mono text-slate-100">2,193</span><span class="opacity-90">Fuzzing attack</span></div>
              <div class="flex items-center gap-2 text-sm text-slate-200"><span class="px-2 py-1 rounded-md bg-slate-700/80 font-mono text-slate-100">1,750</span><span class="opacity-90">Country‑specific targeted</span></div>
            </div>
          </div>

          <!-- High Priority -->
          <div class="card rounded-2xl p-6 space-y-4">
            <div class="flex items-center gap-2">
              <span class="w-3 h-3 rounded-full" style="background:#b91c1c"></span>
              <h3 class="text-xl text-slate-100 font-semibold flex items-center gap-2">
                <svg class="w-5 h-5 text-rose-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/></svg>
                High Priority
              </h3>
            </div>
            <div class="text-5xl font-extrabold tracking-tight" style="color:#b91c1c">99</div>
            <div class="space-y-2">
              <div>
                <div class="flex justify-between text-xs text-slate-300"><span>Critical</span><span>100%</span></div>
                <div class="h-3 w-full bg-slate-700 rounded-md overflow-hidden"><div class="h-full" style="width:100%; background:#b91c1c"></div></div>
              </div>
            </div>
            <div class="pt-2 space-y-2">
              <div class="flex items-center gap-2 text-sm text-slate-200"><span class="px-2 py-1 rounded-md bg-slate-700/80 font-mono text-slate-100">99</span><span class="opacity-90">Probable Human Attacker</span></div>
            </div>
          </div>
        </div>

        <!-- Top 10 Critical Attacks Section -->
        <div class="card rounded-2xl p-6 mt-8">
          <h3 class="text-xl font-semibold text-rose-400 mb-4 flex items-center gap-2">
            <svg class="w-6 h-6 text-rose-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 20v-6m0 0V4m0 10l-4-4m4 4l4-4"/></svg>
            Threats by region
          </h3>
          <div class="overflow-x-auto">
            <table class="min-w-full text-sm text-slate-200">
              <thead>
                <tr class="border-b border-slate-700">
                  <th class="py-2 px-3 text-left">#</th>
                  <th class="py-2 px-3 text-left">Time</th>
                  <th class="py-2 px-3 text-left">Source IP</th>
                  <th class="py-2 px-3 text-left">Country</th>
                  <th class="py-2 px-3 text-left">Target</th>
                  <th class="py-2 px-3 text-left">Attack Type</th>
                  <th class="py-2 px-3 text-left">Severity</th>
                </tr>
              </thead>
              <tbody>
                <tr class="border-b border-slate-800">
                  <td class="py-2 px-3">1</td>
                  <td class="py-2 px-3">08:12</td>
                  <td class="py-2 px-3">185.23.44.12</td>
                  <td class="py-2 px-3">Russia</td>
                  <td class="py-2 px-3">Payment API</td>
                  <td class="py-2 px-3">SQL Injection</td>
                  <td class="py-2 px-3 text-rose-400 font-bold">Critical</td>
                </tr>
                <tr class="border-b border-slate-800">
                  <td class="py-2 px-3">2</td>
                  <td class="py-2 px-3">09:27</td>
                  <td class="py-2 px-3">102.54.11.201</td>
                  <td class="py-2 px-3">Nigeria</td>
                  <td class="py-2 px-3">Customer Portal</td>
                  <td class="py-2 px-3">Credential Stuffing</td>
                  <td class="py-2 px-3 text-rose-400 font-bold">Critical</td>
                </tr>
                <tr class="border-b border-slate-800">
                  <td class="py-2 px-3">3</td>
                  <td class="py-2 px-3">10:03</td>
                  <td class="py-2 px-3">77.88.55.101</td>
                  <td class="py-2 px-3">Germany</td>
                  <td class="py-2 px-3">VPN Gateway</td>
                  <td class="py-2 px-3">Ransomware Dropper</td>
                  <td class="py-2 px-3 text-rose-400 font-bold">Critical</td>
                </tr>
                <tr class="border-b border-slate-800">
                  <td class="py-2 px-3">4</td>
                  <td class="py-2 px-3">11:18</td>
                  <td class="py-2 px-3">203.0.113.45</td>
                  <td class="py-2 px-3">China</td>
                  <td class="py-2 px-3">Core DB</td>
                  <td class="py-2 px-3">Privilege Escalation</td>
                  <td class="py-2 px-3 text-rose-400 font-bold">Critical</td>
                </tr>
                <tr class="border-b border-slate-800">
                  <td class="py-2 px-3">5</td>
                  <td class="py-2 px-3">12:41</td>
                  <td class="py-2 px-3">45.33.32.156</td>
                  <td class="py-2 px-3">USA</td>
                  <td class="py-2 px-3">Admin Panel</td>
                  <td class="py-2 px-3">Zero-Day Exploit</td>
                  <td class="py-2 px-3 text-rose-400 font-bold">Critical</td>
                </tr>
                <tr class="border-b border-slate-800">
                  <td class="py-2 px-3">6</td>
                  <td class="py-2 px-3">13:22</td>
                  <td class="py-2 px-3">196.25.14.88</td>
                  <td class="py-2 px-3">South Africa</td>
                  <td class="py-2 px-3">ATM Network</td>
                  <td class="py-2 px-3">Malware Upload</td>
                  <td class="py-2 px-3 text-rose-400 font-bold">Critical</td>
                </tr>
                <tr class="border-b border-slate-800">
                  <td class="py-2 px-3">7</td>
                  <td class="py-2 px-3">154.16.7.22</td>
                  <td class="py-2 px-3">Brazil</td>
                  <td class="py-2 px-3">Mobile App</td>
                  <td class="py-2 px-3">Remote Code Exec</td>
                  <td class="py-2 px-3 text-rose-400 font-bold">Critical</td>
                </tr>
                <tr class="border-b border-slate-800">
                  <td class="py-2 px-3">8</td>
                  <td class="py-2 px-3">91.200.12.77</td>
                  <td class="py-2 px-3">Ukraine</td>
                  <td class="py-2 px-3">Payment API</td>
                  <td class="py-2 px-3">Brute Force</td>
                  <td class="py-2 px-3 text-rose-400 font-bold">Critical</td>
                </tr>
                <tr class="border-b border-slate-800">
                  <td class="py-2 px-3">9</td>
                  <td class="py-2 px-3">203.0.113.99</td>
                  <td class="py-2 px-3">China</td>
                  <td class="py-2 px-3">Web App</td>
                  <td class="py-2 px-3">XSS Attack</td>
                  <td class="py-2 px-3 text-rose-400 font-bold">Critical</td>
                </tr>
                <tr>
                  <td class="py-2 px-3">10</td>
                  <td class="py-2 px-3">14:55</td>
                  <td class="py-2 px-3">37.120.191.8</td>
                  <td class="py-2 px-3">Netherlands</td>
                  <td class="py-2 px-3">Customer Portal</td>
                  <td class="py-2 px-3">Session Hijack</td>
                  <td class="py-2 px-3 text-rose-400 font-bold">Critical</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      </section>
    </div>
  </div>

  <script>
    // Tab logic
    const tabOverview = document.getElementById('tab-overview');
    const tabAttack = document.getElementById('tab-attack');
    const panelOverview = document.getElementById('panel-overview');
    const panelAttack = document.getElementById('panel-attack');
    function activate(tab) {
      if (tab === 'overview') {
        tabOverview.classList.add('bg-slate-800','text-slate-100');
        tabOverview.classList.remove('bg-slate-900/60','text-slate-300');
        tabAttack.classList.add('bg-slate-900/60','text-slate-300');
        tabAttack.classList.remove('bg-slate-800','text-slate-100');
        panelOverview.classList.remove('hidden');
        panelAttack.classList.add('hidden');
      } else {
        tabAttack.classList.add('bg-slate-800','text-slate-100');
        tabAttack.classList.remove('bg-slate-900/60','text-slate-300');
        tabOverview.classList.add('bg-slate-900/60','text-slate-300');
        tabOverview.classList.remove('bg-slate-800','text-slate-100');
        panelOverview.classList.add('hidden');
        panelAttack.classList.remove('hidden');
      }
    }
    tabOverview.addEventListener('click', () => activate('overview'));
    tabAttack.addEventListener('click', () => activate('attack'));

    // Data: Threat trends for clones (days of week)
    // Data: Threat trends for clones (24h, hourly)
    const labels = Array.from({length: 24}, (_, i) => `${i}:00`);
    const totalAttacks = 321132;
    const serviceShares = [0.28, 0.22, 0.18, 0.17, 0.15];
    // Generate random hourly percentages that sum to 100%
    function randomPercentages(n) {
      let arr = Array.from({length: n}, () => Math.random());
      let sum = arr.reduce((a,b) => a+b, 0);
      return arr.map(x => x/sum);
    }
    // For each hour, generate a random percentage (summing to 100%)
    const hourlyPercents = randomPercentages(24);
    // For each hour, calculate total attacks for that hour
    let hourlyTotals = hourlyPercents.map(p => Math.round(totalAttacks * p));
    // Adjust for rounding errors
    let diff = totalAttacks - hourlyTotals.reduce((a,b)=>a+b,0);
    for(let i=0; diff!==0 && i<24; i++) { hourlyTotals[i%24] += diff>0?1:-1; diff += diff>0?-1:1; }
    // For each service, distribute its share of each hour's attacks
    const services = [
      { key: 'paymentAPI', label: 'Payment API', color: '#22d3ee', share: serviceShares[0] },
      { key: 'webApp', label: 'Web application', color: '#818cf8', share: serviceShares[1] },
      { key: 'vpn', label: 'VPN gateway', color: '#f59e0b', share: serviceShares[2] },
      { key: 'customerX', label: 'Payment gateway', color: '#ef4444', share: serviceShares[3] },
      { key: 'customerY', label: 'Mobile API', color: '#10b981', share: serviceShares[4] },
    ];
    const series = {};
    services.forEach(s => {
      // For each hour, attacks for this service = hourlyTotal * serviceShare
      let attacks = hourlyTotals.map(t => Math.round(t * s.share));
      // Adjust for rounding errors per service
      let serviceTotal = Math.round(totalAttacks * s.share);
      let diff = serviceTotal - attacks.reduce((a,b)=>a+b,0);
      for(let i=0; diff!==0 && i<24; i++) { attacks[i%24] += diff>0?1:-1; diff += diff>0?-1:1; }
      series[s.key] = { label: s.label, color: s.color, attacks };
    });
    // Calculate percent for each service at each hour relative to total at that hour
    for(let h=0; h<24; h++) {
      let totalAtHour = services.reduce((sum, s) => sum + series[s.key].attacks[h], 0);
      services.forEach(s => {
        if (!series[s.key].percent) series[s.key].percent = [];
        series[s.key].percent[h] = totalAtHour > 0 ? Math.round((series[s.key].attacks[h] / totalAtHour) * 100) : 0;
      });
    }

    const ctx = document.getElementById('cloneChart').getContext('2d');
    const datasets = Object.keys(series).map(k => ({
      label: series[k].label,
      data: series[k].percent,
      borderColor: series[k].color,
      backgroundColor: series[k].color,
      borderWidth: 2,
      pointRadius: 3,
      tension: 0.3,
      attacks: series[k].attacks
    }));

    const cloneChart = new Chart(ctx, {
      type: 'line',
      data: { labels, datasets },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: {
            mode: 'index',
            intersect: false,
            callbacks: {
              label: function(ctx) {
                const percent = ctx.parsed.y;
                const attacks = ctx.dataset.attacks[ctx.dataIndex];
                return `${ctx.dataset.label}: ${percent}% (${attacks} attacks)`;
              }
            }
          }
        },
        scales: {
          x: { ticks: { color: '#94a3b8' }, grid: { color: 'rgba(148,163,184,0.15)' } },
          y: { min: 0, max: 100, ticks: { color: '#94a3b8', callback: (v) => v + '%', stepSize: 25 }, grid: { color: 'rgba(148,163,184,0.15)' } }
        }
      }
    });

    // Pills to toggle datasets
    const pillWrap = document.getElementById('clone-pills');
    function renderPills() {
      pillWrap.innerHTML = '';
      cloneChart.data.datasets.forEach((ds, idx) => {
        const active = !cloneChart.getDatasetMeta(idx).hidden;
        const b = document.createElement('button');
  b.className = 'pill px-1.5 py-0.5 rounded-full text-[11px] flex items-center gap-0.5 whitespace-nowrap';
        if (active) b.classList.add('active');
        b.style.color = active ? ds.borderColor : '#94a3b8';
        b.style.borderColor = active ? ds.borderColor : '#334155';
        b.innerHTML = `<span class="inline-block w-2 h-2 rounded-full" style="background:${ds.borderColor}"></span>${ds.label}`;
        b.addEventListener('click', () => {
          const meta = cloneChart.getDatasetMeta(idx);
          meta.hidden = !meta.hidden;
          cloneChart.update();
          renderPills();
        });
        pillWrap.appendChild(b);
      });
    }
    renderPills();

    // Attack Sources Bar Chart
    const barCtx = document.getElementById('barChart').getContext('2d');
    new Chart(barCtx, {
      type: 'bar',
      data: {
        labels: ['AI','SIEM','EDR','User'],
        datasets: [{
          label: 'Events',
          data: [400,300,300,200],
          borderRadius: 8,
          backgroundColor: (ctx) => {
            const {chart, dataIndex} = ctx;
            const colors = ['#22d3ee','#8b5cf6','#22d3ee','#8b5cf6'];
            return colors[dataIndex % colors.length];
          }
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: { legend: { display: false } },
        scales: {
          x: { ticks: { color: '#94a3b8' }, grid: { display: false } },
          y: { ticks: { color: '#94a3b8' }, grid: { color: 'rgba(148,163,184,0.15)' } }
        }
      }
    });

    // Dark/Light mode toggle logic
    document.addEventListener('DOMContentLoaded', function() {
      const btn = document.getElementById('mode-toggle');
      const body = document.body;
      function setMode(mode) {
        body.classList.remove('dark', 'light');
        body.classList.add(mode);
        btn.textContent = mode === 'dark' ? '☀️' : '🌙';
      }
      // Try to use localStorage or system preference
      let mode = localStorage.getItem('catis-mode') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      setMode(mode);
      btn.addEventListener('click', function() {
        mode = body.classList.contains('dark') ? 'light' : 'dark';
        setMode(mode);
        localStorage.setItem('catis-mode', mode);
      });
    });
  </script>
  <footer class="w-full mt-0">
    <div class="max-w-6xl mx-auto">
      <div class="flex flex-row items-center justify-between bg-slate-900 rounded-2xl shadow-lg px-8 py-5">
        <div class="flex flex-row gap-4 items-center">
          <span class="inline-flex items-center px-4 py-1 rounded-full bg-green-500/20 text-green-400 font-bold text-base">99.98% SLA</span>
          <span class="inline-flex items-center px-4 py-1 rounded-full bg-green-500/20 text-green-400 font-bold text-base">&lt;1s MTTD</span>
          <span class="inline-flex items-center px-4 py-1 rounded-full bg-amber-500/20 text-amber-400 font-bold text-base">~2m MTTR</span>
        </div>
        <div class="flex items-center gap-2 font-semibold text-slate-300 text-lg">
          <span class="text-2xl">🛡️</span> CATIS × Finsec
        </div>
        </div>
      </div>
    </div>
  </footer>
</body>
</html>